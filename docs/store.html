<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>NeuraNest Storefront | VaultOps</title>

  <!-- Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MP1L1DMR0E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-MP1L1DMR0E', { send_page_view: false });
  </script>

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1 class="hero-title">üõçÔ∏è NeuraNest Storefront</h1>
    <p>Commerce scroll powered by AI agents and memory signals</p>
  </header>

  <div id="storeGrid" class="store-grid">
    <p>Loading product memory scrolls...</p>
  </div>

  <footer>
    ‚Ü© <a href="index.html">Back to Vault</a> ‚Ä¢ Powered by NeuraNest‚Ñ¢
  </footer>

  <!-- Shopify Buy Button SDK + Bridge Loader -->
  <script>
    (function () {
      const sdk = document.createElement('script');
      sdk.async = true;
      sdk.src = 'https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js';
      sdk.onload = () => {
        console.log('üß† Shopify SDK loaded');
        // Fire GA4 page_view after SDK is ready
        gtag('event', 'page_view', {
          page_title: document.title,
          page_location: window.location.href,
          page_path: window.location.pathname
        });
        // Load your bridge
        const bridge = document.createElement('script');
        bridge.src = 'shopifyBridge.js?cb=' + Date.now();
        document.body.appendChild(bridge);
      };
      document.head.appendChild(sdk);
    })();
  </script>

  <!-- Scroll-Depth Tracking -->
  <script>
    const thresholds = [25, 50, 75, 100];
    window.addEventListener('scroll', () => {
      const scrolled = (window.scrollY + window.innerHeight) 
                      / document.body.scrollHeight * 100;
      thresholds.slice().forEach((t, i) => {
        if (scrolled >= t) {
          gtag('event', 'scroll_depth', { percent: t });
          thresholds.splice(i, 1);
        }
      });
    });
  </script>
</body>
</html>